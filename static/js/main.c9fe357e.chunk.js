(this["webpackJsonpintromatic-react"]=this["webpackJsonpintromatic-react"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(4),o=a.n(r);a(12),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=function(){return c.a.createElement("div",{className:"App"})},l=a(1);a(13);function i(e,t,a,n){var c;n&&(c=JSON.stringify(n));var r="http://127.0.0.1:8000".concat(t),o=new XMLHttpRequest;if(o.open(e,r),o.responseType="json","POST"===e){var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=a[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");o.setRequestHeader("content-type","application/json"),o.setRequestHeader("x-csrftoken",s),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(c)}else o.send();o.onload=function(){a(this.response,this.status)}}function u(e){var t=e.tweet,a=e.perform,n=e.action,r=function(e,t){!function(e,t){i("POST","/api/tweets/action/",t,e)}({id:e,action:t},(function(e,t){200===t&&a(e),201===t&&a(!0)}))};return"count"===n.type?c.a.createElement("button",{className:"action-btn"},t.likes):c.a.createElement("button",{className:"action-btn",onClick:function(){return r(t.id,n.type)}},n.display)}var m=function(e){var t=e.parent;return c.a.createElement("div",{className:"retweet row col-11 mx-auto mb-2"},c.a.createElement("a",{className:"link",href:"www.google.com"},t.user),c.a.createElement("div",{className:"col-12 px-2"},c.a.createElement("div",{className:"p-2"},c.a.createElement("span",{className:"content"},t.content))))},d=function(e){var t=e.UpdateRequired,a=e.canTweet,r=Object(n.useState)(e.tweet),o=Object(l.a)(r,2),s=o[0],i=o[1],d=s.parent_tweet;function w(e){i(e)}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"tweet"},c.a.createElement("div",{className:"Profile"},c.a.createElement("a",{className:"link",href:"www.google.com"},s.user)),c.a.createElement("div",{className:"tweet-content p-2"},c.a.createElement("span",{className:"content"},s.content),d&&c.a.createElement(m,{parent:d})),c.a.createElement("div",{className:"btn-group justify-content-between col-12"},c.a.createElement(u,{tweet:s,perform:w,action:{type:"count"}}),c.a.createElement(u,{tweet:s,perform:w,action:{type:"upvote",display:"Like!"}}),c.a.createElement(u,{tweet:s,perform:w,action:{type:"downvote",display:"Dislike"}}),a&&c.a.createElement(u,{tweet:s,perform:t,action:{type:"retweet",display:"Retweet"}}))))},w=function(e){var t=e.tweetId,a=e.canTweet,r=Object(n.useState)(c.a.createElement("h1",{className:"mx-auto"},"loading...")),o=Object(l.a)(r,2),s=o[0],u=o[1];return Object(n.useEffect)((function(){var e;e=function(e,t){u(200===t?c.a.createElement(d,{tweet:e,canTweet:a}):c.a.createElement("h1",{className:"alert alert-danger mx-auto"},"Sorry we couldn't find that Tweet"))},i("GET","/api/tweets/".concat(t,"/"),e)}),[t,a]),s},p=function(e){var t=e.setNewTweets,a=c.a.createRef(),n=c.a.createRef();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-12 mx-auto col-12",id:"postForm"},c.a.createElement("div",{id:"postTweetError",className:"d-block",ref:n}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var c,r=a.current;c=r.value,i("POST","/api/tweets/list/",(function(e,a){201===a?(n.current.className="d-display alert alert-success",n.current.textContent="Tweet Posted!",console.log("enters 201"),t(!0)):400===a?(n.current.className="d-display alert alert-danger",n.current.textContent=e.content[0]):alert("There was an error-Try Again")}),{content:c}),r.value=""},id:"postTweet"},c.a.createElement("textarea",{type:"text",required:!0,className:"col-12",id:"postContent",name:"content",placeholder:"Share Your Tweet!!",ref:a}),c.a.createElement("div",null,c.a.createElement("button",{type:"submit",className:"btn-lg btn-success my-4"},"POST")))))},f=a(5);function E(e,t,a,n){!function(e,t,a){var n="/api/tweets/list/";e?(n+="?username=".concat(e),t&&(n+="&tweetCount=".concat(t))):t&&(n+="?tweetCount=".concat(t)),i("GET",n,a)}(n=n||null,t.length,(function(n,c){if(200===c){var r=[].concat(Object(f.a)(n),Object(f.a)(t));e(r),a(!1)}else alert("Something went wrong STATUS:\n[Server ERROR:".concat(c,"]"))}))}var v=function(e){var t=e.username,a=e.newTweets,r=e.setNewTweets,o=e.canTweet,s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){!0===a&&(console.log("newTweets",a),E(m,u,r,t))}),[a,t,r]),u.map((function(e,t){return c.a.createElement(d,{tweet:e,key:"".concat(t,"-").concat(e.id),UpdateRequired:r,canTweet:o})}))},g=(a(14),c.a.createElement),T=document.getElementById("Main_App");T&&o.a.render(c.a.createElement(s,null),T);var b=document.getElementById("Main_Tweets");b&&o.a.render(c.a.createElement("div",{className:"mx-auto"},g((function(e){console.log(e);var t="True"===e.canTweet,a=e.tweetId?e.tweetId:-1,r=Object(n.useState)(!0),o=Object(l.a)(r,2),s=o[0],i=o[1];return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(p,Object.assign({},e,{setNewTweets:i})),c.a.createElement("div",{id:"tweets-container"},c.a.createElement(v,Object.assign({newTweets:s,setNewTweets:i,canTweet:t},e))),c.a.createElement("div",{id:"detail-tweet-container",className:"d-none"},c.a.createElement(w,{tweetId:a,canTweet:t,UpdateRequired:s})))}),b.dataset)),b),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.c9fe357e.chunk.js.map